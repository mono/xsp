2005-06-05  Ben Maurer  <bmaurer@ximian.com>

	* configure.in: handle gacutil more correctly :-)

2005-06-02  Ben Maurer  <bmaurer@ximian.com>

	* src/Mono.WebServer/Makefile.am: Handle gacutil and destdir
	correctly.

	* configure.in: GACUTIL flags

2005-06-01 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* src/Mono.WebServer/AssemblyInfo.cs: renamed into...
	* src/Mono.WebServer/AssemblyInfo.cs.in: ...this.
	* src/Mono.WebServer/Makefile.am: don't use -keyfile, as csc does not
	support it. Now 'distcheck' passes and the build works on windows.

2005-06-01 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* src/XSPApplicationHost.cs: Removed file.
	* src/InitialWorkerRequest.cs: Removed file.
	* src/XSPWorkerRequest.cs: Removed file.
	* src/Makefile.am: Modified file.
	* src/Mono.WebServer/Makefile.am: moved some 'meat' to Mono.WebServer.
	xsp.exe is now just 'server.cs' + classes in Mono.WebServer.

2005-05-31  Raja R Harinath  <rharinath@novell.com>

	Fix 'make distcheck'.
	* src/Mono.WebServer/Makefile.am (EXTRA_DIST): Add key.snk.
	(Mono.WebServer.dll): Pass /keyfile: option.
	* src/Mono.WebServer/AssemblyInfo.cs (AssemblyKeyFile): Disable.

2005-05-30 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* server/MonoWorkerRequest.cs:
	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs:
	* server/Tracing.cs:
	* server/BaseRequestBroker.cs:
	* server/ApplicationServer.cs:
	* server/BaseApplicationHost.cs:
	* server/LingeringNetworkStream.cs:
	* server/Makefile.am:
	* server/IWebSource.cs:
	* server/Mono.WebServer:
	* server/Mono.WebServer/AssemblyInfo.cs:
	* server/Mono.WebServer/Makefile.am:
	* server/IApplicationHost.cs:
	* server/Mono.WebServer/*: moved Mono.WebServer.dll files into a new
	directory.

2005-05-16 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: HEAD is now 1.1.x
	* server/AssemblyInfoModMono.cs.in:
	* server/XSPApplicationHost.cs:
	* server/InitialWorkerRequest.cs:
	* server/AssemblyInfo.cs.in:
	* server/Makefile.am:
	* server/server.cs: this is now Mono.WebServer.dll. xsp.exe is there
	just to pass the options to the new assembly. Most of the patch by
	Brian Ritchie.

2005-05-08 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: call the EndOfSend notification when
	the request is told to be ended.

2005-05-07  Ben Maurer  <bmaurer@ximian.com>

	* configure.in: put the full path to mono in RUNTIME
	* */Makefile.am: s.$libdir.$prefix/lib, since that's what mono
	uses. Also, for scripts, use RUNTIME rather than just `mono'.

2005-05-07 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: implemented IsClientConnected.
	* server/ModMonoRequest.cs: added IsConnected and increased version
	number.

	* server/BaseRequestBroker.cs:
	* server/ModMonoApplicationHost.cs: Close the current connection before
	stopping the server when a shutdown request is received.
	* server/XSPApplicationHost.cs:
	* server/IWebSource.cs: IsConnected is now part if IWorker interface.

2005-05-03  Ben Maurer  <bmaurer@ximian.com>

	* configure.in: 1.0.9

2005-04-27 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs:
	* server/ModMonoRequest.cs: Default -> DefaultInvariant. Also don't
	send a FLUSH command to mod_mono, as it's ignored.

2005-04-20 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs:
	* server/XSPApplicationHost.cs: fix warnings and ensure we call Close
	if an error happens when writing to the stream.

2005-04-19 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs: we can set a few server variables here.

	* server/ApplicationServer.cs: remove the socket from the active list
	on timeout so that we don't attempt to use it and delay the error.

2005-04-01 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: use a foreground thread to stop the
	server instead of one from the threadpool. Patch from Rob Lyon that
	fixes bug #73357.

2005-03-18 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: the lockfile is to be removed even
	for TCP sockets. Also return immediately if the module wants us to
	die.

	* server/ApplicationServer.cs: call Dispose on the web source so that
	removing the lockfile and the unix socket is done asap.

	* server/XSPApplicationHost.cs: added empty Dispose().
	* server/IWebSource.cs: IWebSource inherits from IDisposable now.

	This fixes bug #73619.

2005-03-18 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs: prevent empty lines before the
	actual request from causing an error. Fixes bug #73048.

2005-03-05 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: don't print the exception to apache
	logs so that connection probing does not polute them.

2005-03-05 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: prevent premature stop from mod_mono from
	not doing the clean up. Patch from Rob Lyon.

2005-03-05 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/server.cs: fix lockfile name generation. Patch by Mike Lasky.
	Closes bug #73234.

2005-03-02 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: ensure we close the stream to the
	mod_mono socket after Decline, NotFound and in Close. Thanks to Mike
	Lasky for spotting the bug.

2005-02-24 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: mktemp failed on *BSD.

2005-02-20 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs:
	* server/ModMonoTCPWebSource.cs:
	* server/server.cs: use a FileStream as a lock to prevent running
	more than one mod-mono-server with the same arguments.

2005-02-20 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Released 1.0.6

2005-02-11 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: override IsSecure and implement it.
	Part of the fix for bug #71680.

2005-02-11 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: detect if gmcs actually works. Patch by Robert Jordan.

2005-02-08  Raja R Harinath  <rharinath@novell.com>

	* test/2.0/treeview/Makefile.am (install-data-hook,uninstall-hook): 
	Support $(DESTDIR).

2005-02-04 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs: now they use a common method to get the
	pathinfo and pathinfo works with apache too.

	* server/ModMonoRequest.cs: when there's a version mismatch, print it
	everywhere so that it gets to apache logs.

	* server/ApplicationServer.cs: new Paths class containing a method for
	getting the path and pathinfo from an uri.

	* server/InitialWorkerRequest.cs: no pathinfo computation here.
	* server/XSPApplicationHost.cs: removed pathinfo parameter.

	* server/Makefile.am: xsp2.exe was being installed to xsp directory !?

2005-02-01 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: added BadRequest () to HttpErrors.
	* server/XSPApplicationHost.cs: if there's a failure reading the
	request, write back a 400 error to the client. Patch by Russ Young.

2005-01-26  Lluis Sanchez Gual <lluis@ximian.com>

	* configure.in: Added masterpages test directory.
	* test/2.0/masterpages: New master page tests.
	* test/2.0/menu/menu1.aspx: Updated.

2005-01-21 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: if the headers have not been sent and
	someone closes the connection, don't try to reuse it. Discovered thanks
	to buggy user code.

2005-01-20 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: locks in SocketPool. Fixes bug #70388.

2005-01-20 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* server/Makefile.am: don't build mod-mono-server if compiling with csc.

2005-01-20  Lluis Sanchez Gual <lluis@ximian.com>

	* configure.in: Added new test makefiles.

2005-01-20  Lluis Sanchez Gual  <lluis@ximian.com>

	* server/InitialWorkerRequest.cs: Fix parsing of PathInfo.

2005-01-19 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: when Content-Length is set only allow
	sending that amount of bytes in the body. Fixes bug #71092.

2005-01-13  Raja R Harinath  <rharinath@novell.com>

	* server/MonoWorkerRequest.cs: Update to compile with the stricter
	name-resolution of MCS.

2004-12-21 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs:
	* server/XSPApplicationHost.cs: 
	* server/LingeringNetworkStream.cs: the connection is now closed if we
	get an error writing to the socket.

2004-12-15  Raja R Harinath  <rharinath@novell.com>

	* server/Makefile.am (CLEANFILES): Clean up *.exe and *.mdb.
	* tools/dbsessmgr/Makefile.am (EXTRA_DIST): Add dbsessmgr2.exe.config.
	(CLEANFILES): Clean up *.exe and *.mdb.
	* tools/asp_state/Makefile.am (EXTRA_DIST): Add asp-state2.exe.config.
	(CLEANFILES): Clean up *.exe and *.mdb.
	* scripts/Makefile.am (CLEANFILES): Fix typos.  Clean up all the scripts.

2004-12-13 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* server/Makefile.am: if gmcs is available, build xsp2.exe and
	mod-mono-server2.exe using the 2.0 assemblies.

2004-12-11 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: first remove the socket, then close it.
	Seems like the GetHashCode method returns a different value after the
	socket is closed. Fixes bug #70449.

2004-12-10  Raja R Harinath  <rharinath@novell.com>

	* doc/Makefile.am (mod-mono-server.1): Fix non-srcdir build.
	* scripts/Makefile.am ($(bin_SCRIPTS)): Likewise.
	* server/Makefile.am (xsp_only): Remove AssemblyInfo.cs.in.
	(xsp_build_sources): Add AssemblyInfo.cs.
	(modmono_only): Remove AssemblyInfoModMono.cs.in.
	(modmono_build_sources): Add AssemblyInfoModMono.cs.
	(EXTRA_DIST): Add AssemblyInfo.cs.in and AssemblyInfoModMono.cs.in.
	(xsp.exe, mod-mono-server.exe): Remove GNU-makeism.

2004-12-10 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: don't print IOExceptions caused by
	socket read/write errors and don't send back a 500 error on IOExceptions
	or error reading request line. Fixes bug #70391.

2004-12-07 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: if we don't have a Content-Length, force
	closing the connection.

2004-12-02 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: this typo prevented the underlying
	sys.web from knowing the real http version used. If you've seen stack
	traces showing ChunkStream when running *xsp*, that's over now.

2004-11-24 Alp Toker <alp@atoker.com>

	* server/XSPApplicationHost.cs: remove slash.

2004-11-24 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs:
	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs:
	* server/ModMonoRequest.cs:
	* server/BaseRequestBroker.cs:
	* server/AssemblyInfoModMono.cs.in:
	* server/ModMonoApplicationHost.cs:
	* server/ApplicationServer.cs:
	* server/InitialWorkerRequest.cs:
	* server/BaseApplicationHost.cs:
	* server/XSPApplicationHost.cs:
	* server/ModMonoTCPWebSource.cs:
	* server/AssemblyInfo.cs.in:
	* server/LingeringNetworkStream.cs:
	* server/server.cs:
	* server/IWebSource.cs:
	* server/IApplicationHost.cs:
	* COPYING: relicensed under MIT style license.

2004-11-24 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: max. line length for headers is now 8kB.

	* server/ApplicationServer.cs: don't Exit in Stop(). Call the new 
	AppHost.Unload instead of just AppDomain.Unload, as that does not seem
	to trigger the Application_End event under MS runtime. Fixes bug #68709.

	* server/BaseApplicationHost.cs: new method Unload() that calls
	HttpRuntime.UnloadAppDomain for the current application.

	* server/InitialWorkerRequest.cs: maximum length for the request line
	is now 8kB.

	* server/IApplicationHost.cs: added Unload() to the interface.

2004-11-21 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/global.asax: added code here.
	* doc/xsp.1.in: added information on --terminate and <enabled>
	for .webapp files.
	
	* test/sample.webapp: aded <enabled>
	* server/ApplicationServer.cs: don't bail out if the directory given in
	--appconfigdir does not exist. If the <enabled> no exists and is
	'false', don't set up that application.

2004-11-21 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: support for --terminate. Ensure that
	no one else is listening on the same unix socket.
	* server/ModMonoTCPWebSource.cs: support for --terminate.
	* server/server.cs: added --terminate option to mod-mono-server. You
	can use it to gracefully terminate a running mod-mono-server.

2004-11-12 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: remove MKDIR_P
	* server/InitialWorkerRequest.cs: don't print the exception if the
	stream is not reused.
	* autogen.sh: aclocal goes first.

2004-11-11 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: if the client is HTTP/1.1 or sends a
	keep-alive connection header, we keep the connection opened for 15
	seconds waiting for more requests.
	* server/ApplicationServer.cs: Modified file.
	* server/InitialWorkerRequest.cs: throw a different exception if
	something fails reading the request line.
	* server/XSPApplicationHost.cs: Don't print errors due to socket read
	timeout. Handle keep-alive connections.

2004-11-02 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: workaround a bug in MS socket Select
	implementation.
	* server/server.cs: undo workaround for bug #65533.

2004-10-29 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Released 1.0.4.

2004-10-29 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: redirect on directories that are not
	the root virtual directory when the path does not end in '/'. Fixes bug
	#68082.

2004-10-17  Ben Maurer  <bmaurer@ximian.com>

	* server/MonoWorkerRequest.cs (MapPath): avoid the
	concat here.

2004-10-14 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: set the accepted socket to Blocking.

2004-10-03 Ben Maurer  <bmaurer@ximian.com>

	* server/ApplicationServer.cs: use UtcNow

2004-09-30 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_regularexpressionvalidator.aspx: improved example. Patch by
	Tomasz Rybak.

2004-09-29 Ben Maurer  <bmaurer@ximian.com>

	* server/LingeringNetworkStream.cs: make the byte [] buffer
	static here. It is not of consequence what we write to the buffer
	so we may as well cache it.
	* server/XSPWorkerRequest.cs: Avoid String.Format related stuff,
	just append to the stringbuilder.

2004-09-28 Ben Maurer  <bmaurer@ximian.com>

	* server/XSPApplicationHost.cs: rather than pass an ip addr
	across appdomains as a string, pass it as a long. this avoids
	the cost of making it into a string, and related allocations.

2004-09-28 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: application server never dies.
	* test/web_table2.aspx: added missing runat attributes.

2004-09-24 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: 1.0.2.99

	* server/ApplicationServer.cs: allow unloading applications. Fixed
	warnings.

	* server/BaseApplicationHost.cs: when the domain is unloaded, tell
	the application server we don't exist any more.

	* server/BaseRequestBroker.cs: added some sanity checks.

	* server/IApplicationHost.cs: added Server to the interface.

	* server/ModMonoRequest.cs:
	* server/ModMonoWorkerRequest.cs:
	* server/ModMonoApplicationHost.cs: if apache is stopping, tell the
	application server to finish everything off.

	* server/XSPWorkerRequest.cs:
	* server/XSPApplicationHost.cs: fixed warnings.

	* server/server.cs: if running interactive, unload all applications
	before exiting.

2004-09-12 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: make the server socket non-blocking and
	ignore any exception on Accept.

2004-09-12 Ben Maurer  <bmaurer@ximian.com>

	* server/server.cs: allow for clean exit (workaround)
	* server/XSPWorkerRequest.cs: avoid a remoting call.
	cache MemoryStreams
	* InitialWorkerRequest.cs: cache byte [] buffers.

2004-09-04 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: added AM_MKDIR_P to make automake 1.8 happier.

2004-08-31 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: don't set the socket timeout for
	mod-mono-server. Apache should take care of that.

	* server/BaseApplicationHost.cs:
	* server/BaseRequestBroker.cs:
	* server/ModMonoApplicationHost.cs: unregister the request in
	EndOfRequest event because under heavy load HttpRuntime.ProcessRequest
	might return immediately and queue the request for later processing.

	* server/XSPApplicationHost.cs: unregister the request when redirecting

	* server/MonoWorkerRequest.cs:
	* server/ModMonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs: RequestId is now part of
	MonoWorkerRequest interface.

2004-08-17 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: ignore exceptions when setting socket
	options as there are systems that don't support them. Fixes bug #63031.

2004-08-04 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* nunit-tests/standalone/Makefile.am:
	* tools/nunitasp/source/NUnitAspTest/Makefile.am: fix distcheck on a
	clean system and remove warnings.

2004-08-04 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: GetRequestHeader is case insensitive
	now. Thanks to Jan Jaros.

2004-08-02 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Makefile.am:
	* configure.in:
	* nunit-tests/standalone/Makefile.am:
	* scripts/.cvsignore:
	* scripts/Makefile.am:
	* scripts/script.in:
	* server/Makefile.am:
	* tools/asp_state/Makefile.am:
	* tools/dbsessmgr/Makefile.am:
	* tools/nunitasp/source/NUnitAsp/Makefile.am:
	* tools/nunitasp/source/NUnitAspTest/Makefile.am: added xsp and
	mod-mono-server scripts, remove .mdb files when cleaning.

2004-07-30 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: fix host matching in presence of *.
	Closes bug #61275.

	* server/ModMonoWorkerRequest.cs: don't duplicate the slash when setting
	a default file name that we know is not present.

2004-07-29 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: 1.0.1.
	* server/ApplicationServer.cs: don't timeout in Select when we only have
	the listener socket. Use real times for timeout.

2004-07-28 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ApplicationServer.cs: increased the backlog for listen, set
	accepted sockets read/write timeout to 15s and handle timeouts when
	reading request data before submitting the work item to the threadpool.
	* server/XSPApplicationHost.cs: don't write a 500 error response if
	we got an IOException when reading from the network stream.
	* server/XSPWorkerRequest.cs: if there's an IOException when reading
	the headers, just rethrow it.

2004-07-19 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: don't write the 50x error response
	to the stream. Just closing works and doesn't drive mod_mono crazy.

2004-07-14 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile.am:
	* test/chunked.ashx: the output of this handler should be chunked for
	1.1 clients and 1.0 clients that send the Accept-Encoding to 'chunked'.

2004-07-13 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs:
	* server/ModMonoRequest.cs:
	* server/ModMonoWorkerRequest.cs: when we can't find a suitable
	application, return NOT_FOUND to mod_mono.

2004-07-10 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile.am: added ModMonoTCPWebSource.

	* server/ModMonoApplicationHost.cs: in ModMonoWebSource, CreateSocket
	is now virtual and the .ctor receives the file name as parameter.

	* server/ModMonoRequest.cs: prevent absurd string sizes if the socket
	is not in a expected state.

	* server/ModMonoTCPWebSource.cs: supports mod_mono communication over
	a TCP socket.

	* server/XSPApplicationHost.cs: XSPWebSource .ctor receives address
	and port as parameters.

	* server/server.cs: updated help, handle address and port in
	mod-mono-server. Choose TCP or unix socket IWebSource depending on the
	arguments.

2004-07-09 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: made the headers Hashtable case
	insensitive.

2004-07-08 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/BaseRequestBroker.cs: Modified file.
	* server/ModMonoRequest.cs: more data cached on first read.
	* server/ModMonoWorkerRequest.cs: use Buffer.BlockCopy instead of
	Array.Copy.

2004-07-07 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs: remove the unix socket file when
	finishing.

	* test/Makefile.am: added missing files.

	* test/mono-xsp.css:
	* test/index.aspx: reduced size of the generated page.

2004-07-07 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoApplicationHost.cs:
	* server/ModMonoWorkerRequest.cs:
	* server/ModMonoRequest.cs: removed unused method/options and the
	ack sent back after writing something. Unified setting status code
	and message into 1 single command.
 
2004-06-30 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Released 1.0.

2004-06-24 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: 0.15.99.
	* server/ApplicationServer.cs: added method in VPathToHost that tells
	if we're trying /xxx where xxx is a directory (ie, we need to redirec).

	* server/InitialWorkerRequest.cs: don't remove trailing '/' in
	GetSafePath ().

	* server/XSPApplicationHost.cs: handle redirects and fixed nullref.
	Closes bug #60478.

	* ChangeLog: style.
	* server/ModMonoApplicationHost.cs: splitted long lines.
	* server/MonoWorkerRequest.cs: style.

2004-06-20  Lluis Sanchez Gual  <lluis@ximian.com>

	* IApplicationHost.cs: Added RequestBroker property to IApplicationHost.
	  The application host will query for information through this object,
	  which lives in the main domain.
	  
	* Makefile.am: Added new files.
	
	* ModMonoRequest.cs: Added position parameter in SendResponseFromMemory,
	so we can send partially filled buffers.  GetClientBlock(): Some checks
	that where done in ModMonoWorkerRequest have been moved here. We can
	avoid two cross-app domain calls in this way.  Merged SetStatusCode and
	SetStatusLine into SetStatusCodeLine. We avoid another cross-app domain
	call.
	  
	* ModMonoWorkerRequest.cs: Renamed to ModMonoWorkerRequest, to make
	things more understandable.  Removed all references to ModMonoRequest.
	All request information is now available as input parameters or through
	the IRequestBroker.  Some old calls to ModMonoRequest have been merged
	into a single IRequestBroker call, to avoid the overhead of a cross-app
	domain call.
	  
	* XSPApplicationHost.cs: Most of the code has been moved to other
	classes:
	  ApplicationServer, WebSource, XSPWebSource, ModMonoWebSource...
	  
	* XSPWorkerRequest.cs: Removed dependency to RequestData, since passing
	it through the cross-app domain channel requires serialization support.
	The same information is passed as primitive parameters.  In general,
	calls to the network stream are now done through the IRequestBroker.
	  
	* server.cs: Create the ApplicationServer by providing a
	ModMonoWebSource or a XSPWebSource instance.
	  
	* ApplicationServer.cs: New file. Moved here the old
	XSPApplicationServer.  Almost all code is now shared between XSP and
	mod_mono. Specific behavior is now encapsulated in an IWebSource object.
	  
	* LingeringNetworkStream.cs: New file. Moved here the old
	MyNetworkStream.
	
	* BaseApplicationHost.cs: New file. Moved here the old
	XSPApplicationHost.
	
	* WebSource.cs: New file. Defines the IWebSource and IWorker interfaces.
	
	* XSPApplicationHost.cs: New file. Provides an implementation for XSP
	of a IWebSource, an IRequestBroker, an IApplicationHost and an IWorker.
	  
	* ModMonoApplicationHost.cs: New file. Provides an implementation for 
	mod_mono of a IWebSource, an IRequestBroker, an IApplicationHost and an 
	IWorker.

2004-06-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile.am: install extensions.dll into test directory so that
	ServiceClient.exe runs fine.

2004-06-15 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/favicon.ico:
	* test/index.aspx:
	* test/mono-powered-big.png:
	* test/mono-xsp.css:
	* test/monobutton.png:
	* test/small-icon.png: better appearance. Patch from Antonio Ognio.

2004-06-14 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: allow wilcard for vhosts, fixed matching
	of /xxx when we have a vhost for /xxx/, matching moved to VPathToHost
	class and improved. When creating a new host, lock on the VPathToHost
	object, not the entire array of vhosts.

	* server/server.cs: don't allow duplicated options passed in the command
	line. No need to wait on a handle when --nonstop. Just make the runner
	thread have IsBackGround to false and finish the main one.

2004-06-12 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/dbpage1.aspx:
	* test/dbpage2.aspx: fixed connection leaks by adding a Page_Unload
	method that closes the connection.

2004-06-11 Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile.am: added typedesc.*
	* test/typedesc.(aspx|cs): sample test control showing how a Type that
	has a TypeDescriptor can be saved/restored to/from ViewState.

2004-06-10  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: only send the Close to the module
	once.

	* server/XSPApplicationHost.cs: added new class MyNetworkStream that
	handles lingering close for xsp standalone like apache does. Fixes
	bug #59688. BIG THANKS to David Taylor.

	* server/XSPWorkerRequest.cs: ensure we read all the data requested for
	the request body. Only call stream.Close once.

2004-06-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web.config: commented out gzip and mono.aspnet. It's
	causing troubles some times.
2004-06-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* doc/xsp.1.in:
	* server/server.cs: don't flag --applications as deprecated.

2004-06-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/serial.aspx: test that I used when gathering information
	to fix bug #59495.

2004-06-02  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* INSTALL: added note for windows users.
	* configure.in: 0.14.99
	* server/InitialWorkerRequest.cs: UrlDecode the path and check
	safety.  Fixes bug #59429.

2004-06-02  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Released 0.14

2004-05-30  Jackson Harper  <jackson@ximian.com>

	* configure.in: 
	* doc/.cvsignore:
	* doc/Makefile.am:
	* doc/asp_state.1.in: Add asp_state man page.
	
2004-05-28  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* doc/.cvsignore:
	* doc/Makefile.am:
	* doc/dbsessmgr.1.in:
	* doc/xsp.1.in: added dbsessmgr manual page.

	* nunit-tests/standalone/Makefile.am:
	* tools/dbsessmgr/AssemblyInfo.cs.in:
	* tools/nunitasp/source/NUnitAsp/Makefile.am:
	* tools/nunitasp/source/NUnitAspTest/Makefile.am: build fixes.

	* tools/asp_state/asp_state.exe.config: added ?xml stuff.
	* tools/dbsessmgr/dbsessmgr.cs: use LoadWithPartialName.

2004-05-28  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* INSTALL:
	* README: updated.

2004-05-28  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* doc/xsp.1.in: added .webapp file format details and updated.
	* server/server.cs: UnixSocketFileName -> MonoUnixSocket. Mark
	--applications as deprecated.

2004-05-26  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: only support HTTP 1.0 in xsp.exe.

2004-05-20  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/AssemblyInfo.cs.in:
	* server/AssemblyInfoModMono.cs.in: upadted year.
	* server/InitialWorkerRequest.cs: don't UrlDecode the path at this
	stage.

2004-05-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* NEWS:
	* README: updated.

	* configure.in:
	* doc/Makefile.am:
	* doc/xsp.1.in: updated manual page and install the same one for
	mod-mono-server.

	* doc/xsp.1: Removed.

2004-05-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile.am: InitialWorkerRequest.cs is only needed for xsp.

	* server/XSPApplicationHost.cs:
	* server/server.cs: support for virtual hosts in mod-mono-server by
	Jaroslaw Kowalsky.

	* test/Makefile.am:
	* test/datalist.aspx:
	* test/sample.webapp: added new files.

2004-05-14  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* ChangeLog: forgot an entry.

	* configure.in: 0.13.99
	* test/tabcontrol.cs: don't try to serialize a StateBag.

2004-05-06  Sebastien Pouliot  <sebastien@ximian.com>

	* INSTALL: Removed notes about RNG on Windows as this had been fixed
	for some times.

2004-05-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/dbpage1.aspx:
	* test/dbpage2.aspx:
	* test/mod-mono-server.exe.config:
	* test/web.config: don't use the deprecated Mono.Data.PostgresqlClient,
	but Npgsql.

2004-05-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile.am: install the sample dlls to the right place. Thanks
	to Pablo Baena.

2004-05-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* tools/nunitasp/source/NUnitAspTest/Makefile.am: fixed distcheck and
	don't install NUnitAspTest.dll.

2004-05-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* INSTALL: added note on building using CSC.

	* test/mod-mono-server.exe.config:
	* test/web.config: use Version and PublicKeyToken where applicable.

2004-04-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* NEWS:
	* ChangeLog: updated.

	* server/ModMonoWorkerRequest.cs: fixed buglet that made unknown headers
	not pass from mod_mono to System.Web. Shame on me.

2004-04-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: fixed PathInfo for mod_mono. Smells
	like a new release.

	Released 0.11.

2004-04-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* NEWS: updated.
	* server/ModMonoRequest.cs:
	* server/ModMonoWorkerRequest.cs: marshal 2 string arrays instead of
	a Hashtable for request headers.

	Released 0.10.

2004-04-08  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: try the default index pages as the
	standalone xsp does.

2004-04-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* AUTHORS:
	* configure.in:
	* nunit-tests/Makefile.am:
	* nunit-tests/standalone/Makefile.am:
	* server/Makefile.am:
	* test/.cvsignore:
	* test/Makefile.am:
	* test/TestService.asmx:
	* test/authtest/.cvsignore:
	* test/authtest/Makefile.am:
	* tools/asp_state/.cvsignore:
	* tools/asp_state/Makefile.am:
	* tools/dbsessmgr/.cvsignore:
	* tools/dbsessmgr/Makefile.am:
	* tools/nunitasp/source/Makefile.am:
	* tools/nunitasp/source/NUnitAsp/.cvsignore:
	* tools/nunitasp/source/NUnitAsp/Makefile.am:
	* tools/nunitasp/source/NUnitAsp/AspTester/.cvsignore:
	* tools/nunitasp/source/NUnitAsp/AspTester/Makefile.am:
	* tools/nunitasp/source/NUnitAsp/HtmlTester/.cvsignore:
	* tools/nunitasp/source/NUnitAspTest/.cvsignore:
	* tools/nunitasp/source/NUnitAspTest/Makefile.am:
	* tools/nunitasp/source/NUnitAspTest/AspTester/.cvsignore:
	* tools/nunitasp/source/NUnitAspTest/AspTester/Makefile.am:
	* tools/nunitasp/source/NUnitAspTest/HtmlTester/.cvsignore: makefile
	love. distcheck works now. Fixes bug #53652.

	* nunit-tests/standalone/Makefile.in:
	* server/Makefile.in:
	* test/Makefile.in:
	* tools/asp_state/Makefile.in:
	* tools/dbsessmgr/Makefile.in:
	* tools/nunitasp/source/NUnitAsp/Makefile.in:
	* tools/nunitasp/source/NUnitAspTest/Makefile.in: removed

2004-04-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: HostVPath treated as HostVPath + "/".

	* server/XSPApplicationHost.cs: replaced CR by CRLF in error messages
	sent to the client. Close the connection if we're writing an error.

	* server/XSPWorkerRequest.cs: replaced CR by CRLF and added the server
	header to the error.

	* server/server.cs: removed useless line.

2004-03-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: really close the opened connection.
	Patch from Jan Jaros.

2004-01-16  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: apply the same changes as in
	XSPWorkerRequest.cs related to PathInfo. Patch by Chris Turchin.
	This makes blogx work with mod_mono.

2004-01-08  Martin Willemoes Hansen  <mwh@sysrq.dk>

	* test/web_adrotator.xml: Added a ad for Mono, now the
	  control realy shows its rotation capability.

2004-01-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Makefile.am: added nunit-tests to SUBDIRS.
	* server/Makefile.in:
	* test/Makefile.in:
	* tools/asp_state/Makefile.in:
	* tools/dbsessmgr/Makefile.in:
	* tools/nunitasp/source/NUnitAsp/Makefile.in:
	* tools/nunitasp/source/NUnitAspTest/Makefile.in: added distclean
	target.

2003-12-16  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/server.cs: beutified error on --address argument. Fixes bug
	#52208.

2003-12-11  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* nunit-tests/Makefile.am:
	* nunit-tests/standalone/Makefile.in:
	* nunit-tests/standalone/bug51682-1.aspx:
	* nunit-tests/standalone/bug51682-1.cs: added first standalone test.

2003-12-11  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* tools/Makefile.am: added nunitasp to the build.

2003-12-02  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Released 0.8.

2003-11-26  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: added EndOfRequestEvent and invoke it
	in the override of EndOfRequest.

	* server/XSPApplicationHost.cs: use the new event and close the socket
	when notified of request end. This makes xsp work under heavy load too,
	when HttpRuntime.ProcessRequest returns inmediately.

2003-11-24  Jackson Harper <jackson@ximian.com>

	* tools/asp_state/asp_state.exe.config: Use same port as MS, load
	the RemoteStateServer from System.Web.
	
2003-11-24  Jackson Harper <jackson@ximian.com)

	* tools:
	* tools/Makefile.am: Add tools directory, this will contain, umm tools.
	* tools/asp_state:
	* tools/asp_state/asp_state.cs:
	* tools/asp_state/Makefile.in:
	* tools/asp_state/AssemblyInfo.cs.in:
	* tools/asp_state/asp_state.exe.config:An ASP.NET State server.
	* Makefile.am:
	* configure.in: Add tools to the build.
	
2003-11-18  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoRequest.cs: cache the result of the first (and unique)
	SetupClientBlock. Return false when should not block.

	* server/ModMonoWorkerRequest.cs: removed staled stuff. First do a
	'should' and then setup the client block.


2003-11-17  Duncan Mak  <duncan@ximian.com>

	* server/Makefile.in (LOCAL_BIN_DIR):
	* test/Makefile.in (SAMPLES_DIR, SAMPLES_BIN_DIR): Use
	$(DESTDIR)$(prefix) instead of @prefix@. This is needed for the
	build system.

2003-11-16  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* doc/xsp.1: updated.

	* server/AssemblyInfo.cs.in:
	* server/AssemblyInfoModMono.cs.in: Novell.

	* server/server.cs: handle wrong --root directories.

2003-11-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: no need to create a full WorkerRequest
	when we just want to get the uri information.

	* server/XSPApplicationHost.cs: removed workaround for the bug.

2003-10-28  Pedro Martínez Juliá  <yoros@wanadoo.es>

	* server/XSPApplicationHost.cs: add a few lines to set the domain
	data requested by XSPWorkerReqest (SimpleWorkerRequest). These are
	garbage lines because they are used only for the main application
	and there must be other way to get mod-mono-server working without
	this little hack.

	* test/Makefile.in: add "*.inc" and "*.xsl" to the install wildcard
	list. These files are needed by other "*.aspx" files.

2003-10-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/IApplicationHost.cs: reduced to the minimum.

	* server/ModMonoRequest.cs: removed unused Hashtable and make the
	headers hashtable case insensitive.

	* server/XSPApplicationHost.cs: new class HttpErrors. Splitted
	XSPApplicationHost. Now there's a XSPApplicationServer which does the
	server work and creates the XSPApplicationHosts. Lock when adding new
	applications to dirToHost (thanks Lluis!)
	
	* server/server.cs: use XSPApplicationServer.

2003-10-09  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs: reduced up to the minimum needed
	before it's serialized, as suggested by Lluis.
	* server/XSPApplicationHost.cs: make worker serializable again. Fixes
	bug #49354.
	* server/XSPWorkerRequest.cs: read the headers here.

2003-10-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in: output the assemblyinfos too.
	* doc/Makefile.am: extradist.
	* server/AssemblyInfoModMono.cs.in: for mod-mono-server.
	* server/InitialWorkerRequest.cs: PathInfo should work now.
	* server/Makefile.in: use the assemblyinfo*.in files.
	* server/server.cs: added --version.
	* test/Makefile.in: simplified.

2003-10-05  Pedro Martínez Juliá  <yoros@wanadoo.es>

	* test/index.aspx: change directory where files are searched because
	if test directory is not the root directory of the server, the index
	page will have other files.

2003-10-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* configure.in:
	* doc/Makefile.am:
	* server/Makefile.in:
	* test/Makefile.in: use automake.

	* Makefile.in:
	* doc/Makefile.in: Removed files.

2003-10-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Makefile.in: fix dist target.
	* server/XSPApplicationHost.cs: re-added line removed by mistake.
	* server/server.cs: added --nonstop argument to allow xsp be run with
	no controlling tty.

2003-10-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* INSTALL: updated.
	* NEWS: updated.

	* Makefile.in:
	* doc/Makefile.in:
	* server/Makefile.in:
	* test/Makefile.in:
	* autogen.sh:
	* configure.in: do a real dist target. Make it work on windows.
	
	* server/ModMonoRequest.cs: read basic request data upon connection.
	* server/ModMonoWorkerRequest.cs: implemented GetUnknownHeaders.
	* server/MonoWorkerRequest.cs: minimize cross-appdomain calls.
	* server/XSPApplicationHost.cs: Worker is now MarshalByRef, not
	[Serializable]. Set the server thread as background.
	* server/server.cs: the server is now stopped by pressing enter. You
	can disable this behavior with --nonstop argument.
	* test/DefaultWsdlHelpGenerator.aspx: this has been moved to mono/data.

2003-10-01  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* Makefile.in:
	* autogen.sh:
	* configure.in:
	* doc/Makefile.in:
	* server/Makefile.in:
	* test/Makefile.in: added 'dist' target to make a tarball.

2003-09-27  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: really add the sponsors now.

2003-09-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* ChangeLog: unified all ChangeLog.

	* NEWS:
	* INSTALL: updated.

	* Makefile:
	* doc/Makefile.in:
	* doc/directives-syntax.txt:
	* doc/generated-code.txt:
	* doc/helping.txt:
	* server/ChangeLog:
	* server/Makefile:
	* server/Makefile.in:
	* server/global.asax:
	* server/mod-mono-server.exe.config:
	* server/xsp.exe.config:
	* test/ChangeLog:
	* test/Makefile:
	* test/Makefile.in:
	* test/global.asax:
	* test/mod-mono-server.exe.config:
	* test/xsp.exe.config:
	* test/authtest/ChangeLog: use auto* stuff forthe build and
	unified ChangeLog.

	* server/XSPApplicationHost.cs: added a couple of catches.

2003-09-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: added a ISponsor for NetworkStream and
	don't crash xsp.exe if RemoteEndPoint throws an exception.

2003-09-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ModMonoWorkerRequest.cs: don't cache the values from
	mod_mono_unix here...
	* server/ModMonoRequest.cs: ...and do it here.
	(GetClientBlock): mark the array as an Out parameter so that the
	modified array is passed back to the caller by remoting. This fixes
	POST when using mod_mono_unix.

2003-09-18  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: don't crash when no Host header is received or
	if it has an invalid port.

2003-09-14  Lluis Sanchez Gual <lluis@ximian.com>

	* test/DefaultWsdlHelpGenerator.aspx. Added support for C# proxy generation.

2003-09-04  Lluis Sanchez Gual <lluis@ximian.com>

	* test/Added DefaultWsdlHelpGenerator.aspx.

2003-09-04  Lluis Sanchez Gual <lluis@ximian.com>

	* server/XSPWorkerRequest.cs: GetServerName(): reverted previous patch. There
	was a conflict with previous changes.
	Also modified implementation of GetLocalAddress(). It should get the
	value from the request header.

2003-09-04  Lluis Sanchez Gual <lluis@ximian.com>

	* server/XSPWorkerRequest.cs: GetServerName(): return the 
	  address of the local server.

2003-08-29  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs: removed Console...
	* server/ModMonoRequest.cs: removed debug output.

	* server/ModMonoWorkerRequest.cs: added pathinfo support.
	* server/MonoWorkerRequest.cs: removed GetRawUrl from here.
	* server/XSPApplicationHost.cs: read the request data needed to get the Uri.


2003-08-29  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs: added PathInfo support.
	
	* server/MonoWorkerRequest.cs: removed unused GetPathInfo. Don't cache the
	mapped path as it may change (ie., / -> /index.aspx).

	* server/XSPWorkerRequest.cs: support pathinfo. Works with MS. Always send
	the 'Connection: close' header. Added support for GetLocal*.

2003-08-27  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs: fixed bugs 47937 and 47938.

	* server/XSPApplicationHost.cs: close the socket when finished.

	* server/XSPWorkerRequest.cs: small fixes in ReadEntityBody. Removed the 302
	redirection, handle it faking the path.

2003-08-26  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: infinite lifetime for XSPApplicationHost.

2003-08-25  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/InitialWorkerRequest.cs:
	* server/XSPWorkerRequest.cs: keep the read buffer, its length and the position
	around (used in POST). Somehow this bug didnn't show up under MS
	runtime.

	* server/XSPApplicationHost.cs: fixed warning and commented out WriteLines.

2003-08-25  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/IApplicationHost.cs: added 2 methods and 1 property to the
	interface.
	
	* server/InitialWorkerRequest.cs: used to read the request data before
	determining which application (if at all) is gonna process it.
	
	* server/Makefile: added new source file.

	* server/ModMonoRequest.cs: removed AliasMatches and added Decline.

	* server/ModMonoWorkerRequest.cs: new .ctor and Decline method that
	tells apache that we won't handle the request.
	
	* server/MonoWorkerRequest.cs: variable renamed.

	* server/XSPApplicationHost.cs: it can now handle multiple applications.
	* server/XSPWorkerRequest.cs: simplified as reading the request data
	is done in InitialWorkerRequest.

	* server/xsp.exe.config:
	* server/mod-mono-server.exe.config: added MonoApplications default
	setting.

	* server/server.cs: updated help and set the applications registered.
	

2003-08-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs: handle possible exceptions in ProcessRequest.
	* server/XSPWorkerRequest.cs: don't do any check on the verb. If an error
	happens reading the request or the headers, send a 500 back and
	terminate.

2003-08-17  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/AssemblyInfo.cs: updated version number.

2003-08-07  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: write the correct number of bytes when flushing
	the response.

2003-08-01  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/monodoc.ashx: added this file that contains a couple of directives
	plus monodoc/browser/website-handler.cs. Yeah! BenM rules.

2003-08-01  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/index.aspx: also list .ashx files.
	* test/webhandler.ashx: added new sample.

2003-08-01  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/mod-mono-server.exe.config: New file.

	* server/Makefile:
	* server/ModMonoRequest.cs: new class that communicate with the new
	mod_mono_unix apache2 module.

	* server/ModMonoWorkerRequest.cs: HttpWorkerRequest for unix socket.

	* server/server.cs:
	* server/XSPApplicationHost.cs: updated for new apache2 module.

2003-07-30  Sebastien Pouliot  <spouliot@videotron.ca>

	* test/Makefile: Corrected extensions.dll for csc, error: Options '/out' and '/target' 
	must appear before source file names

2003-07-24  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web.config: update to new type/assembly name and make it use gzip by
	default.

2003-07-24  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/AcceptEncodingConfig.cs:
	* server/AcceptEncodingModule.cs:
	* server/AcceptEncodingSectionHandler.cs:
	* server/GZipFilter.cs:
	* server/Makefile: these .cs files have been moved to Mono.Http.dll.

	* server/AssemblyInfo.cs: upgrade version.

2003-07-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web.config: the new mono.aspnet configuration section has been added
	and other contents from ../server/web.config file.

2003-07-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/AcceptEncodingConfig.cs: class to hold the configuration for the
	filters enabled in web.config.

	* server/AcceptEncodingModule.cs: IHttpModule to plug the filters.

	* server/AcceptEncodingSectionHandler.cs: configuration file section handler
	for accept-encoding filters.

	* server/GZipFilter.cs: sample filter for gzip encoding.

	* server/Makefile: reference ICSharpCode.SharpZipLib, added new files and
	renamed executable to xsp.exe

	* server/server.exe.config: removed and renamed to...
	* server/xsp.exe.config: ...this one.
	* server/web.config: Removed file. It's been merged with ../test/

2003-07-09  Lluis Sanchez Gual <lluis@ximian.com>

	* test/README: added descrption of web service samples.
	* test/Makefile: added compilation of extensions and service client.
	* test/web.config: Copied from the server directory. It includes soap extension configuration.
	* test/TestService.asmx: New file. A simple test service.
	* test/ConverterService.asmx: New file. Currency conversion test service.
	* test/TraceExtension.cs: New file. Trace soap extension.
	* test/EncryptExtension.cs: New file. A Soap extension that encrypts the info.
	* test/DumpExtension.cs: New file. Dump soap extension.
	* test/ServiceClient.cs: New file. Web service test app.
	* test/ServiceClient.exe.config: New file. Config file for the ServiceClient test app.
	* test/Reference.cs: New file. Web service client proxy implementation.

2003-07-09  Lluis Sanchez Gual <lluis@ximian.com>

	* server/Makefile: install target: copy web service files.

2003-06-20  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: reverted latest Ben's patch as it causes an
	annoying bug when testing under windows.

2003-05-31  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPApplicationHost.cs:
	* server/XSPWorkerRequest.cs: support GetRemoteName, GetRemoteAddress and
	GetRemotePort. Fixes bug #43985.

2003-05-24  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: when redirecting to an index page, also use the
	query string. Fixes bug #43598.

2003-05-24  Ben Maurer <bmaurer@users.sourceforge.net>
	* server/XSPWorkerRequest.cs: Now /foo/ does not redirect to
	/foo/index.aspx, it just does a Response.Transfer () sort of
	thing.

2003-05-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/body.inc: New file.
	* test/header.inc: New file.
	* test/includetest.aspx: New file.

2003-05-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs:
	* server/server.cs:
	* server/server.exe.config:
	* server/web.config: the index files must be set in the proper AppDomain.
	Fixes #42309.

2003-05-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/web.config: removed server.exe keys.
	* server/Makefile: readded server.exe.config.

	* server/XSPWorkerRequest.cs:
	* server/server.cs:
	* server/server.exe.config: made the default index files list configurable.

2003-05-03  Pedro Martínez Juliá  <yoros@wanadoo.es>

	* server/server.cs: new options to set listen address.

2003-03-27  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: added a MapPathEvent that is fired before doing
	the normal MapPath stuff and can provide alternate mappings.

2003-02-17  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile: .dbg files are gone.

	* server/MonoWorkerRequest.cs: fixed MapPath to deal with virtual directories.
	* server/XSPWorkerRequest.cs: some cosmetic changes along with a fix when
	redirecting to location page.

	* server/server.cs: new options to set the root and virtual directory for the
	application.

	* server/XSPApplicationHost.cs: keep path and virtual path in instance fields.

2003-02-15  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_datagrid_command.aspx: added sample that allows deleting rows from
	a data source.

2003-02-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/authtest/index.aspx:
	* test/authtest/login.aspx:
	* test/authtest/web.config: authorization test from http://www.asp.net.

2003-02-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: when running under MS runtime, closing 'stream'
	is required too.

2003-02-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: fixed buglet in GetAppPath.

2003-02-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile: removed installation of server.exe.config.
	* server/XSPWorkerRequest.cs: buffered input from the socket.
	* server/server.exe.config: Removed file. Yahoo!
	* server/web.config: authentication mode set to Forms.

2003-02-02  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/XSPWorkerRequest.cs: fixed ReadEntityBody. Thanks to Brian Ritchie.
	Don't use a StreamReader to read from the stream cause it may buffer
	some data. TODO -> now we're using ReadByte to read from the stream.
	We should use Read and do some buffering.

2003-01-15  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/dbpage1.aspx:
	* test/dbpage2.aspx: make the database accessing samples take some
	parameters from the configuration file to choose the IDbConnection
	and documented it.

2003-01-15  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile:
	* server/server.exe.config:
	* server/web.config: make the database accessing samples take some
	parameters from the configuration file to choose the IDbConnection
	and documented it.

2003-01-14  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs:
	* server/XSPWorkerRequest.cs: moved GetUnknownHeader(s) here.

2003-01-14  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/IApplicationHost.cs: 
	* server/MonoWorkerRequest.cs: the same files as in mod_mono. They must be kept
	in synch.

	* server/XSPApplicationHost.cs: same as previous MonoApplicationHost, but
	implements IApplicationHost.

	* server/XSPWorkerRequest.cs: it derives now from MonoWorkerRequest. Removed
	some overrides that are already present in the base class.

	* server/server.cs: use XSPApplicationHost.

	* server/Makefile: added/removed files to SOURCES. Install the .dbg file.

	* server/MonoApplicationHost.cs: Removed file.

	Now mod_mono and xsp share IApplicationHost and MonoWorkerRequest.

2003-01-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: fixed GetRawUrl.

2003-01-08  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_datagrid.aspx: simple datagrid test.

2003-01-07  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/registertest.aspx:
	* test/registertest1.ascx:
	* test/registertest2.ascx: new test for @ Register directive.

2003-01-07  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile: also copy .ascx files.

2003-01-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile: added codebehind1 test.
	* test/codebehind1.[aspx|cs]: codebehind test by David B. Bitton
	<david@codenoevil.com>.

2002-12-20  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: it know handles directory requests either
	redirecting to a / terminated url for directories or searching for one
	of the default index files for / terminated urls.

2002-12-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: changes to match recent MapPath fixing in
	System.Web.

2002-12-13  Juli Mallett  <jmallett@FreeBSD.org>

	* server/Makefile, server/Makefile, src/Makefile: Spell `make' as `$(MAKE)'.
	* server/README: Fix typo.

2002-12-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/AssemblyInfo.cs: New file.
	* server/Makefile: added AssemblyInfo.cs.
	* server/MonoWorkerRequest.cs: create Server header from assembly attributes.
	Thanks to alp and danmorg. Some path handling fixes and kludges.

2002-12-10  Alp Toker <alp@atoker.com>

	* server/server/MonoWorkerRequest.cs: send a 'Server' HTTP header

2002-12-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/server/Makefile: updated.
	* server/server/MonoWorkerRequest.cs: give credits to Opless (Simon White).
	* server/server/server.cs: get the port from a config file.
	* server/server/server.exe.config: configuration file.
	* server/server/web.config: added appSettings.

2002-11-24  Daniel Morgan <danmorg@sc.rr.com>

	* test/dbpage1.aspx: modify to dynamically load
	the Mono.Data.PostgreSqlClient assembly
	and Connection class
	Mono.Data.PostgreSqlClient.PgSqlConnection.  This is
	a temporary solution until global.asax has support for this.

2002-10-31  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/MonoWorkerRequest.cs: use a default encoding without markers.
	* server/server.cs: Trace output goes to Console.Out.

2002-10-27  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile: added Tracing.cs

	* server/MonoApplicationHost.cs: use WebTrace.
	
	* server/MonoWorkerRequest.cs: use WebTrace. Also changed FlushResponse. Now
	it outputs correctly the status and the headers.
	
	* server/Tracing.cs: new file. Almost the same as System.Web.Util.WebTrace.
	It's used to get some output under MS runtime, which disables normal
	tracing for System.Web.

	* server/server.cs: removed Trace stuff.

2002-10-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/Makefile: used to build the .cs files for user controls.

2002-10-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/Makefile: added 'trace' target.
	* server/index.aspx: removed file added by mistake.

2002-10-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* server/ChangeLog:
	* server/Makefile:
	* server/MonoApplicationHost.cs:
	* server/MonoWorkerRequest.cs:
	* server/global.asax:
	* server/index.aspx:
	* server/server.cs:
	* server/web.config: new web server that uses ASP.NET hosting capabilities.
	It works with MS runtime and will be used to debug our classes from
	now on. xsp/src/* is now obsoleted and will stop working some time soon.

2002-09-27  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/databind-arraylist.aspx: fixed variable name.

	* test/htmlimage.aspx:
	* test/htmlinputimage.aspx:
	* test/tabcontrol2.aspx:
	* test/web_adrotator.xml:
	* test/web_hyperlink.aspx:
	* test/web_image.aspx:
	* test/web_imagebutton.aspx: modify the img url. Ximian site changed.

2002-09-04  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/index.aspx: now we have a working Path...

2002-08-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/dbpage2.aspx: fixes to make mcs happy.

2002-08-01  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/temperature.aspx: Duncan asked for this temperature converter.

2002-07-31  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_dropdownlist.aspx: New file.

2002-07-28  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/mono.png: image for the index page.
	* test/index.aspx: index.aspx page which shows the list of available .aspx
	files in the current directory. Contributed by Alp Toker.

	* test/validator1.aspx: first validator test working!

2002-07-23  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/dbpage2.aspx: new sample. It uses tabcontrol2 and sets up a page
	with 4 tabs (Browse, Insert, Update, Delete) for maintenance of a simple
	PostgreSQL database using ADO.NET.

2002-07-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/tabcontrol.aspx: removed .dll extension from assembly file name.

	* test/tabcontrol2.aspx: now it does not set up the contents of each tab
	programatically. It uses <Mono:TabContent...>.

	* test/tabcontrol2.cs: added TabContent control. TabContent can contain any
	control (excluding HtmlForm, of course). Modified Tabs2 to use
	TabContent and maintaining state of all tabs.

2002-07-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/tabcontrol2.aspx: page to test tabcontrol2.cs

	* test/tabcontrol2.cs: almost the same as tabcontrol1, but this one handles
	postback events an stores a ControlCollection associatted to each tab.

2002-07-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/tabcontrol.aspx: sample using a user control that allows modifying
	its properties and display the resulting control.

	* test/tabcontrol.cs: the user control for the above page. It must be
	compiled and the dll copied to output directory if testing with our
	test server.

2002-07-06  Gonzalo Paniagua Javier <gonzalo@gnome-db.org>

	* test/dbpage1.aspx: displays data from a database in a Table.

2002-07-03  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/server-side-object.aspx: New file.

2002-06-29  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/session1.aspx: used to play with session tracking.

2002-06-20  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_repeater.aspx: rendered ok. Includes data binding!

2002-06-19  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_radiobuttonlist.aspx: another one.

2002-06-18  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_checkboxlist.aspx: New file. Still have to fix the Name property
	to assign name attribute depending on parent name.

2002-06-18  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_listbox.aspx: new file rendered ok.

2002-06-17  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_table.aspx: New file. Renders Table, TableRow and TableCell.

2002-06-16  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_panel.aspx: New file.

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_radiobutton.aspx:
	* test/web_textbox.aspx: 2 more.

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_imagebutton.aspx: rendered ok.

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_linkbutton.aspx: 17 more to go!

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_label.aspx: fixed cut&paste error in title.

	* test/web_literal.aspx:
	* test/web_placeholder.aspx: New files.

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_label.aspx: one more.

2002-06-12  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_button.aspx:
	* test/web_checkbox.aspx: another couple rendered ok.

2002-06-11  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/web_adrotator.aspx:
	* test/web_hyperlink.aspx:
	* test/web_image.aspx: new tests that render fine with our System.Web.

	* test/web_adrotator.xml: needed by web_adrotator.aspx.

2002-06-09  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/htmltable.aspx:
	* test/htmltextarea.aspx: New files. Rendered ok.

2002-06-09  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/htmlselect.aspx: another one that is rendered by our System.Web.

2002-06-06  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/htmlinputbutton.aspx: New file. Renders fine with our System.Web.
	* test/htmlinputcheckbox.aspx: another one.
	* test/htmlinputfile.aspx: another one.

2002-06-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/htmlimage.aspx: New file. Renders fine with our System.Web.

2002-06-05  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/htmlanchor.aspx: New file.
	* test/htmlbutton.aspx: New file.
	* test/htmlgeneric.aspx: New file.

	These render fine using xsp + server + mono System.Web.

2002-05-25  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/code-render.aspx: new file.

2002-05-24  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/databind-attribute.aspx: new file.

2002-05-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/databind-template.aspx: added another template (previously, this
	failed to generate proper code).

2002-05-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/databind-template.aspx: new file.

2002-05-22  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/databind-class.aspx: new file.

2002-05-21  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/listitem.aspx: new file.

2002-05-16  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/calendar.aspx: new file. Style properties inside component.

2002-05-15  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	* test/README, ChangeLog: changed line ending to unix format.

	* test/databind-arraylist.aspx: added an ArrayList as server object. Also
	changed to unix format.

2002-05-14  Gonzalo Paniagua Javier <gonzalo@ximian.com>

	Created directory and added a couple of samples.

